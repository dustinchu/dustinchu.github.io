<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[FragmentPagerAdapter+ViewPager 實現TabLayout]]></title>
      <url>http://yoursite.com/2016/12/15/My-New-post/</url>
      <content type="html"><![CDATA[<h2 id="FragmentPagerAdapter-ViewPager-實現TabLayout"><a href="#FragmentPagerAdapter-ViewPager-實現TabLayout" class="headerlink" title="FragmentPagerAdapter+ViewPager 實現TabLayout"></a>FragmentPagerAdapter+ViewPager 實現TabLayout</h2><a id="more"></a>
<blockquote>
<p>版權聲明：轉載請保留原文連結及作者<br>最近剛好在寫UI順便記錄一下<br>在安卓5.0有新增了<code>TabLauout</code>但他並不能滿足很多時候想顯示的樣子<br>所以使用<code>V4</code>下的<code>FragmentPagerAdapter</code>來實現.請記得都要<code>import v4</code> 否則會報錯<br>呈現的效果如下</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="http://i.imgur.com/8p12MLw.gif" width="400" height="400"></p>
<h2 id="程式碼"><a href="#程式碼" class="headerlink" title="程式碼"></a>程式碼</h2><ul>
<li>程式碼分成四類</li>
<li><code>FragmentPagerAdapter</code></li>
<li><code>ArrayList&lt;Fragment&gt;()</code></li>
<li>初始化三個布局</li>
<li>更改點擊的布局屬性</li>
</ul>
<h3 id="布局XML"><a href="#布局XML" class="headerlink" title="布局XML"></a>布局XML</h3><ul>
<li>從上面的效果可以看的出來</li>
<li>沒選重的狀況下其他兩個字體大小要一置 選重的要變大</li>
<li>下底線要與字體長度一樣</li>
<li><p>程式碼如下</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"> &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"</div><div class="line">    android:layout_width="match_parent"</div><div class="line">    android:layout_height="55dp"</div><div class="line">    android:paddingLeft="16dp"</div><div class="line">    android:paddingRight="16dp"</div><div class="line">    android:orientation="horizontal"&gt;</div><div class="line"></div><div class="line">    &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"</div><div class="line">        android:layout_width="match_parent"</div><div class="line">        android:layout_height="match_parent"</div><div class="line">        android:gravity="center"</div><div class="line">        android:orientation="horizontal"&gt;</div><div class="line"></div><div class="line">        &lt;LinearLayout</div><div class="line">            android:id="@+id/id_tab_trend"</div><div class="line">            android:layout_width="0dp"</div><div class="line">            android:layout_height="wrap_content"</div><div class="line">            android:gravity="center"</div><div class="line">            android:layout_weight="1"</div><div class="line">            android:orientation="vertical"&gt;</div><div class="line"></div><div class="line">            &lt;TextView</div><div class="line">                android:id="@+id/id_tab_tv_trend"</div><div class="line">                android:layout_width="wrap_content"</div><div class="line">                android:layout_height="wrap_content"</div><div class="line">                android:layout_gravity="center"</div><div class="line">                android:textColor="#D6EDC6" /&gt;</div><div class="line">            &lt;ImageView</div><div class="line">                android:id="@+id/id_tab_trend_img"</div><div class="line">                android:layout_width="wrap_content"</div><div class="line">                android:layout_height="wrap_content"</div><div class="line">                android:background="@drawable/tabline"</div><div class="line">                android:layout_gravity="center"</div><div class="line">                android:layout_marginTop="5dp"/&gt;</div><div class="line">        &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line">        &lt;LinearLayout</div><div class="line">            android:id="@+id/id_tab_surrounding"</div><div class="line">            android:layout_width="0dp"</div><div class="line">            android:layout_height="wrap_content"</div><div class="line">            android:gravity="center"</div><div class="line">            android:layout_weight="1"</div><div class="line">            android:orientation="vertical"&gt;</div><div class="line"></div><div class="line">            &lt;TextView</div><div class="line">                android:id="@+id/id_tab_tv_sourrounding"</div><div class="line">                android:layout_width="wrap_content"</div><div class="line">                android:layout_height="wrap_content"</div><div class="line">                android:layout_gravity="center"</div><div class="line">                android:textColor="#D6EDC6" /&gt;</div><div class="line">            &lt;ImageView</div><div class="line">                android:id="@+id/id_tab_surrounding_img"</div><div class="line">                android:layout_width="wrap_content"</div><div class="line">                android:layout_height="wrap_content"</div><div class="line">                android:background="@drawable/tabline"</div><div class="line">                android:layout_gravity="center"</div><div class="line">                android:layout_marginTop="5dp"/&gt;</div><div class="line">        &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line">        &lt;LinearLayout</div><div class="line">            android:id="@+id/id_tab_appliances"</div><div class="line">            android:layout_width="0dp"</div><div class="line">            android:layout_height="wrap_content"</div><div class="line">            android:gravity="center"</div><div class="line">            android:layout_weight="1"</div><div class="line">            android:orientation="vertical"&gt;</div><div class="line"></div><div class="line">            &lt;TextView</div><div class="line">                android:id="@+id/id_tab_tv_appliances"</div><div class="line">                android:layout_width="wrap_content"</div><div class="line">                android:layout_height="wrap_content"</div><div class="line">                android:layout_gravity="center"</div><div class="line">                android:textColor="#D6EDC6" /&gt;</div><div class="line">            &lt;ImageView</div><div class="line">                android:id="@+id/id_tab_appliances_img"</div><div class="line">                android:layout_width="wrap_content"</div><div class="line">                android:layout_height="wrap_content"</div><div class="line">                android:background="@drawable/tabline"</div><div class="line">                android:layout_gravity="center"</div><div class="line">                android:layout_marginTop="5dp"/&gt;</div><div class="line">        &lt;/LinearLayout&gt;</div><div class="line">    &lt;/LinearLayout&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>在一個<code>LinearLayout</code>裡面 再放三個`LinearLayout``</p>
</li>
<li>按照比例分配`android:layout_weight=”1”``</li>
<li>點擊後在程式碼將點擊的<code>layout_weight</code> 改成你要的比例在把字體放大</li>
</ul>
<h3 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mFragment = <span class="keyword">new</span> ArrayList&lt;Fragment&gt;();</div><div class="line">       Fragment mTab01 = <span class="keyword">new</span> TrendFragment();</div><div class="line">       Fragment mTab02 = <span class="keyword">new</span> SurroundingFragment();</div><div class="line">       Fragment mTab03 = <span class="keyword">new</span> AppliancesFragment();</div><div class="line">       mFragment.add(mTab01);</div><div class="line">       mFragment.add(mTab02);</div><div class="line">       mFragment.add(mTab03);</div></pre></td></tr></table></figure>
<h3 id="FragmentPagerAdapter"><a href="#FragmentPagerAdapter" class="headerlink" title="FragmentPagerAdapter"></a>FragmentPagerAdapter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">mAdapter = <span class="keyword">new</span> FragmentPagerAdapter(getSupportFragmentManager()) &#123;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> Fragment <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line"></div><div class="line">                <span class="keyword">return</span> mFragment.get(position);</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> mFragment.size();</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        mViewPager.setAdapter(mAdapter);</div><div class="line">        <span class="comment">// Touch Replace the content area</span></div><div class="line">        mViewPager.setOnPageChangeListener(<span class="keyword">new</span> ViewPager.OnPageChangeListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrolled</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">float</span> positionOffset, <span class="keyword">int</span> positionOffsetPixels)</span> </span>&#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">                <span class="keyword">int</span> currentItem = mViewPager.getCurrentItem();</div><div class="line">                setTab(currentItem);</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrollStateChanged</span><span class="params">(<span class="keyword">int</span> state)</span> </span>&#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="重置"><a href="#重置" class="headerlink" title="重置"></a>重置</h3><ul>
<li>這邊來判斷字的寬度 來依照讀取的寬度來設定線的長度</li>
<li>這邊只貼其中一組 textview ImageView 請在自行補上其他的<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resetColor</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">        mTvTrend.setTextColor(getResources().getColor(R.color.tab_not_selectedl_Color));</div><div class="line">        mTvTrend.setTextSize(NOT_SELECTED);</div><div class="line">        mTvTrend.setText(one);</div><div class="line">        mTabTrend.setLayoutParams(<span class="keyword">new</span> LinearLayout.LayoutParams(<span class="number">0</span>, LinearLayoutCompat.LayoutParams.WRAP_CONTENT, <span class="number">1.0f</span>));</div><div class="line">        mTabtrendImg.setBackgroundResource(R.drawable.tabline);</div><div class="line">        mTvTrend.measure(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        LinearLayout.LayoutParams trend = <span class="keyword">new</span> LinearLayout.LayoutParams(mTvTrend.getMeasuredWidth(), LinearLayout.LayoutParams.WRAP_CONTENT);</div><div class="line">        mTabtrendImg.setLayoutParams(trend);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="點擊"><a href="#點擊" class="headerlink" title="點擊"></a>點擊</h3><ul>
<li>在點擊的時候先呼叫一次<code>resetColor();</code></li>
<li>在設定布局比例 文字大小</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line"></div><div class="line">       <span class="keyword">switch</span> (v.getId()) &#123;</div><div class="line">           <span class="keyword">case</span> R.id.id_tab_trend:</div><div class="line">               setSelect(<span class="number">0</span>);</div><div class="line">               <span class="keyword">break</span>;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSelect</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">    resetColor();</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">switch</span> (i) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">            mTabTrend.setLayoutParams(<span class="keyword">new</span> LinearLayout.LayoutParams(<span class="number">0</span>, LinearLayout.LayoutParams.WRAP_CONTENT, <span class="number">1.5f</span>));</div><div class="line">            mTvTrend.setTextColor(getResources().getColor(R.color.tab_selectedl_Color));</div><div class="line">            mTvTrend.setTextSize(SELECTED);</div><div class="line">            mTvTrend.setText(<span class="string">"O N E"</span>);</div><div class="line">            mTabtrendImg.setBackgroundResource(R.drawable.tablineselect);</div><div class="line">            mTvTrend.measure(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">            LinearLayout.LayoutParams trend = <span class="keyword">new</span> LinearLayout.LayoutParams(mTvTrend.getMeasuredWidth(), LinearLayout.LayoutParams.WRAP_CONTENT);</div><div class="line">            mTabtrendImg.setLayoutParams(trend);</div><div class="line">            <span class="keyword">break</span>;</div></pre></td></tr></table></figure>
<h3 id="滑動"><a href="#滑動" class="headerlink" title="滑動"></a>滑動</h3><ul>
<li>別忘了上面寫的ViewPage事件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">               <span class="keyword">int</span> currentItem = mViewPager.getCurrentItem();</div><div class="line">               setTab(currentItem);</div><div class="line"></div><div class="line">           &#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSelect</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">       resetColor();</div><div class="line"></div><div class="line"></div><div class="line">       <span class="keyword">switch</span> (i) &#123;</div><div class="line">           <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">               mTabTrend.setLayoutParams(<span class="keyword">new</span> LinearLayout.LayoutParams(<span class="number">0</span>, LinearLayout.LayoutParams.WRAP_CONTENT, <span class="number">1.5f</span>));</div><div class="line">               mTvTrend.setTextColor(getResources().getColor(R.color.tab_selectedl_Color));</div><div class="line">               mTvTrend.setTextSize(SELECTED);</div><div class="line">               mTvTrend.setText(<span class="string">"O N E"</span>);</div><div class="line">               mTabtrendImg.setBackgroundResource(R.drawable.tablineselect);</div><div class="line">               mTvTrend.measure(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">               LinearLayout.LayoutParams trend = <span class="keyword">new</span> LinearLayout.LayoutParams(mTvTrend.getMeasuredWidth(), LinearLayout.LayoutParams.WRAP_CONTENT);</div><div class="line">               mTabtrendImg.setLayoutParams(trend);</div><div class="line">               <span class="keyword">break</span>;</div></pre></td></tr></table></figure>
<h3 id="結尾"><a href="#結尾" class="headerlink" title="結尾"></a>結尾</h3><ul>
<li>程式碼可以在寫一個<code>class</code>來去放 這樣會比較好維護一點</li>
<li>下底線圖片要改成<code>.9</code>會比較好一點</li>
</ul>
]]></content>
    </entry>
    
  
  
</search>
